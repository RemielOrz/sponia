/*!
author: remiel <i@remiel.me> 
date: 2014-11-28 
*/
function Swipe(a,b){"use strict";function c(){p=u.children,t=p.length,p.length<2&&(b.continuous=!1),o.transitions&&b.continuous&&p.length<3&&(u.appendChild(p[0].cloneNode(!0)),u.appendChild(u.children[1].cloneNode(!0)),p=u.children),q=new Array(p.length),s=a.getBoundingClientRect().height||a.offsetHeight,r=a.getBoundingClientRect().width||a.offsetWidth,"y"==b.axis?u.style.height=p.length*s+"px":u.style.width=p.length*r+"px";for(var c=p.length;c--;){var d=p[c];"y"==b.axis?d.style.height=s+"px":d.style.width=r+"px",d.setAttribute("data-index",c),o.transitions&&("y"==b.axis?(d.style.top=c*-s+"px",h(c,v>c?-s:c>v?s:0,0)):(d.style.left=c*-r+"px",h(c,v>c?-r:c>v?r:0,0)))}b.continuous&&o.transitions&&("y"==b.axis?(h(f(v-1),-s,0),h(f(v+1),s,0)):(h(f(v-1),-r,0),h(f(v+1),r,0))),o.transitions||("y"==b.axis?u.style.top=v*-s+"px":u.style.left=v*-r+"px"),a.style.visibility="visible"}function d(){b.continuous?g(v-1):v&&g(v-1)}function e(){b.continuous?g(v+1):v<p.length-1&&g(v+1)}function f(a){return(p.length+a%p.length)%p.length}function g(a,c){if(v!=a){if(o.transitions){var d=Math.abs(v-a)/(v-a);if(b.continuous){var e=d;d="y"==b.axis?-q[f(a)]/s:-q[f(a)]/r,d!==e&&(a=-d*p.length+a)}var g=Math.abs(v-a)-1;if("y"==b.axis)for(;g--;)h(f((a>v?a:v)-g-1),s*d,0);else for(;g--;)h(f((a>v?a:v)-g-1),r*d,0);a=f(a),"y"==b.axis?h(v,s*d,c||w):h(v,r*d,c||w),h(a,0,c||w),b.continuous&&("y"==b.axis?h(f(a-d),-(s*d),0):h(f(a-d),-(r*d),0))}else a=f(a),"y"==b.axis?j(v*-s,a*-s,c||w):j(v*-r,a*-r,c||w);v=a,n(b.callback&&b.callback(v,p[v]))}}function h(a,b,c){i(a,b,c),q[a]=b}function i(a,c,d){var e=p[a],f=e&&e.style;f&&("y"==b.axis?(f.webkitTransitionDuration=f.MozTransitionDuration=f.msTransitionDuration=f.OTransitionDuration=f.transitionDuration=d+"ms",f.webkitTransform="translate(0,"+c+"px)translateZ(0)",f.msTransform=f.MozTransform=f.OTransform="translateY("+c+"px)"):(f.webkitTransitionDuration=f.MozTransitionDuration=f.msTransitionDuration=f.OTransitionDuration=f.transitionDuration=d+"ms",f.webkitTransform="translate("+c+"px,0)translateZ(0)",f.msTransform=f.MozTransform=f.OTransform="translateX("+c+"px)"))}function j(a,c,d){if(!d)return void("y"==b.axis?u.style.top=c+"px":u.style.left=c+"px");var e=+new Date,f=setInterval(function(){var g=+new Date-e;return g>d?("y"==b.axis?u.style.top=c+"px":u.style.left=c+"px",z&&k(),b.transitionEnd&&b.transitionEnd.call(event,v,p[v]),void clearInterval(f)):void("y"==b.axis?u.style.top=(c-a)*(Math.floor(g/d*100)/100)+a+"px":u.style.left=(c-a)*(Math.floor(g/d*100)/100)+a+"px")},4)}function k(){x=setTimeout(e,z)}function l(){z=0,clearTimeout(x)}var m=function(){},n=function(a){setTimeout(a||m,0)},o={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,transitions:function(a){var b=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var c in b)if(void 0!==a.style[b[c]])return!0;return!1}(document.createElement("swipe"))};if(a){var p,q,r,s,t,u=a.children[0];b=b||{};var v=parseInt(b.startSlide,10)||0,w=b.speed||300;b.continuous=void 0!==b.continuous?b.continuous:!0,"y"==b.axis&&(a.className+=" swipe-y");var x,y,z=b.auto||0,A={},B={},C={handleEvent:function(a){switch(a.type){case"touchstart":this.start(a);break;case"touchmove":this.move(a);break;case"touchend":n(this.end(a));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":n(this.transitionEnd(a));break;case"resize":n(c)}b.stopPropagation&&a.stopPropagation()},start:function(a){var b=a.touches[0];A={x:b.pageX,y:b.pageY,time:+new Date},y=void 0,B={},u.addEventListener("touchmove",this,!1),u.addEventListener("touchend",this,!1)},move:function(a){if(!(a.touches.length>1||a.scale&&1!==a.scale)){b.disableScroll&&a.preventDefault();var c=a.touches[0];B={x:c.pageX-A.x,y:c.pageY-A.y},"undefined"==typeof y&&(y="y"==b.axis?!!(y||Math.abs(B.x)>=Math.abs(B.y)):!!(y||Math.abs(B.x)<Math.abs(B.y))),y||(a.preventDefault(),l(),b.continuous?"y"==b.axis?(i(f(v-1),B.y+q[f(v-1)],0),i(v,B.y+q[v],0),i(f(v+1),B.y+q[f(v+1)],0)):(i(f(v-1),B.x+q[f(v-1)],0),i(v,B.x+q[v],0),i(f(v+1),B.x+q[f(v+1)],0)):("y"==b.axis?B.y=B.y/(!v&&B.y>0||v==p.length-1&&B.y<0?Math.abs(B.y)/s+1:1):B.x=B.x/(!v&&B.x>0||v==p.length-1&&B.x<0?Math.abs(B.x)/r+1:1),"y"==b.axis?(i(v-1,B.y+q[v-1],0),i(v,B.y+q[v],0),i(v+1,B.y+q[v+1],0)):(i(v-1,B.x+q[v-1],0),i(v,B.x+q[v],0),i(v+1,B.x+q[v+1],0))))}},end:function(){var a,c,d,e=+new Date-A.time;"y"==b.axis?(a=Number(e)<250&&Math.abs(B.y)>20||Math.abs(B.y)>r/2,c=!v&&B.y>0||v==p.length-1&&B.y<0,b.continuous&&(c=!1),d=B.y<0,y||(a&&!c?(d?(b.continuous?(h(f(v-1),-s,0),h(f(v+2),s,0)):h(v-1,-s,0),h(v,q[v]-s,w),h(f(v+1),q[f(v+1)]-s,w),v=f(v+1)):(b.continuous?(h(f(v+1),s,0),h(f(v-2),-s,0)):h(v+1,s,0),h(v,q[v]+s,w),h(f(v-1),q[f(v-1)]+s,w),v=f(v-1)),b.callback&&b.callback(v,p[v])):b.continuous?(h(f(v-1),-s,w),h(v,0,w),h(f(v+1),s,w)):(h(v-1,-s,w),h(v,0,w),h(v+1,s,w)))):(a=Number(e)<250&&Math.abs(B.x)>20||Math.abs(B.x)>r/2,c=!v&&B.x>0||v==p.length-1&&B.x<0,b.continuous&&(c=!1),d=B.x<0,y||(a&&!c?(d?(b.continuous?(h(f(v-1),-r,0),h(f(v+2),r,0)):h(v-1,-r,0),h(v,q[v]-r,w),h(f(v+1),q[f(v+1)]-r,w),v=f(v+1)):(b.continuous?(h(f(v+1),r,0),h(f(v-2),-r,0)):h(v+1,r,0),h(v,q[v]+r,w),h(f(v-1),q[f(v-1)]+r,w),v=f(v-1)),b.callback&&b.callback(v,p[v])):b.continuous?(h(f(v-1),-r,w),h(v,0,w),h(f(v+1),r,w)):(h(v-1,-r,w),h(v,0,w),h(v+1,r,w)))),u.removeEventListener("touchmove",C,!1),u.removeEventListener("touchend",C,!1)},transitionEnd:function(a){parseInt(a.target.getAttribute("data-index"),10)==v&&(z&&k(),b.transitionEnd&&b.transitionEnd.call(a,v,p[v]))}};return c(),z&&k(),o.addEventListener?(o.touch&&u.addEventListener("touchstart",C,!1),o.transitions&&(u.addEventListener("webkitTransitionEnd",C,!1),u.addEventListener("msTransitionEnd",C,!1),u.addEventListener("oTransitionEnd",C,!1),u.addEventListener("otransitionend",C,!1),u.addEventListener("transitionend",C,!1)),window.addEventListener("resize",C,!1)):window.onresize=function(){c()},{setup:function(){c()},slide:function(a,b){l(),g(a,b)},prev:function(){l(),d()},next:function(){l(),e()},stop:function(){l()},getPos:function(){return v},getNumSlides:function(){return t},kill:function(){l(),"y"==b.axis?(u.style.height="",u.style.top=""):(u.style.width="",u.style.left="");for(var a=p.length;a--;){var c=p[a];"y"==b.axis?(c.style.height="",c.style.top=""):(c.style.width="",c.style.left=""),o.transitions&&i(a,0,0)}o.addEventListener?(u.removeEventListener("touchstart",C,!1),u.removeEventListener("webkitTransitionEnd",C,!1),u.removeEventListener("msTransitionEnd",C,!1),u.removeEventListener("oTransitionEnd",C,!1),u.removeEventListener("otransitionend",C,!1),u.removeEventListener("transitionend",C,!1),window.removeEventListener("resize",C,!1)):window.onresize=null}}}}console.log("module:Swipe"),(window.jQuery||window.Zepto)&&!function(a){a.fn.Swipe=function(b){return this.each(function(){a(this).data("Swipe",new Swipe(a(this)[0],b))})}}(window.jQuery||window.Zepto);